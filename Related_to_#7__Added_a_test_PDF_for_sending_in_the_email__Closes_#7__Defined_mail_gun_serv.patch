Index: pom.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- pom.xml	(revision 5086b24a9e9081fe525345ec62986c6f8ffcb1f9)
+++ pom.xml	(revision 0782044daa69c58c842aa97c26b701849578a42f)
@@ -78,7 +78,6 @@
             <groupId>org.springframework.boot</groupId>
             <artifactId>spring-boot-starter-web</artifactId>
         </dependency>
-
         <!-- persistence -->
         <dependency>
             <groupId>org.springframework.boot</groupId>
@@ -187,6 +186,12 @@
             <artifactId>junit</artifactId>
             <scope>test</scope>
         </dependency>
+        <!-- for API interactions e.g. MailGun -->
+        <dependency>
+            <groupId>com.mashape.unirest</groupId>
+            <artifactId>unirest-java</artifactId>
+            <version>1.4.9</version>
+        </dependency>
 
         <!-- end of testing -->
     </dependencies>
Index: src/main/java/ph/devcon/rapidpass/RapidpassApplication.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- src/main/java/ph/devcon/rapidpass/RapidpassApplication.java	(revision 5086b24a9e9081fe525345ec62986c6f8ffcb1f9)
+++ src/main/java/ph/devcon/rapidpass/RapidpassApplication.java	(revision 0782044daa69c58c842aa97c26b701849578a42f)
@@ -1,12 +1,18 @@
 package ph.devcon.rapidpass;
 
+import com.mashape.unirest.http.JsonNode;
+import com.mashape.unirest.http.exceptions.UnirestException;
 import org.springframework.boot.CommandLineRunner;
 import org.springframework.boot.ExitCodeGenerator;
 import org.springframework.boot.SpringApplication;
 import org.springframework.boot.autoconfigure.SpringBootApplication;
 import org.springframework.context.annotation.ComponentScan;
+import ph.devcon.rapidpass.services.email.EmailPayload;
+import ph.devcon.rapidpass.services.email.MailGunEmailService;
 import springfox.documentation.swagger2.annotations.EnableSwagger2;
 
+import java.util.concurrent.ExecutionException;
+
 @SpringBootApplication
 @EnableSwagger2
 @ComponentScan(basePackages = {
@@ -17,7 +23,7 @@
 public class RapidpassApplication implements CommandLineRunner
 {
     @Override
-    public void run(String... arg0) throws Exception {
+    public void run(String... arg0) {
         if (arg0.length > 0 && arg0[0].equals("exitcode")) {
             throw new RapidpassApplication.ExitException();
         }
@@ -25,6 +31,17 @@
     
     public static void main(String[] args)
     {
+        boolean TRY_SEND_EMAIL = false;
+        if (TRY_SEND_EMAIL) {
+            try {
+                JsonNode jsonNode = new MailGunEmailService(new EmailPayload()).send();
+                System.out.println("MailGun Response: ");
+                System.out.println(jsonNode);
+            } catch (UnirestException e) {
+                e.printStackTrace();
+            }
+        }
+
         new SpringApplication(RapidpassApplication.class).run(args);
     }
     
Index: src/main/java/ph/devcon/rapidpass/services/email/EmailPayload.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- src/main/java/ph/devcon/rapidpass/services/email/EmailPayload.java	(revision 0782044daa69c58c842aa97c26b701849578a42f)
+++ src/main/java/ph/devcon/rapidpass/services/email/EmailPayload.java	(revision 0782044daa69c58c842aa97c26b701849578a42f)
@@ -0,0 +1,9 @@
+package ph.devcon.rapidpass.services.email;
+
+public class EmailPayload {
+
+    @Override
+    public String toString() {
+        return "Your request for a RapidPass was granted. Attached below is your QR Pass. Please present it to your designated checkpoint. Stay safe!";
+    }
+}
Index: src/main/java/ph/devcon/rapidpass/services/email/EmailService.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- src/main/java/ph/devcon/rapidpass/services/email/EmailService.java	(revision 0782044daa69c58c842aa97c26b701849578a42f)
+++ src/main/java/ph/devcon/rapidpass/services/email/EmailService.java	(revision 0782044daa69c58c842aa97c26b701849578a42f)
@@ -0,0 +1,5 @@
+package ph.devcon.rapidpass.services.email;
+
+public interface EmailService<Payload extends EmailPayload, Response> {
+    Response send() throws Exception;
+}
Index: src/main/java/ph/devcon/rapidpass/services/email/MailGunEmailService.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- src/main/java/ph/devcon/rapidpass/services/email/MailGunEmailService.java	(revision 0782044daa69c58c842aa97c26b701849578a42f)
+++ src/main/java/ph/devcon/rapidpass/services/email/MailGunEmailService.java	(revision 0782044daa69c58c842aa97c26b701849578a42f)
@@ -0,0 +1,64 @@
+package ph.devcon.rapidpass.services.email;
+
+import java.io.File;
+import java.util.Date;
+
+import com.mashape.unirest.http.HttpResponse;
+import com.mashape.unirest.http.JsonNode;
+import com.mashape.unirest.http.Unirest;
+import com.mashape.unirest.http.exceptions.UnirestException;
+import com.mashape.unirest.request.body.MultipartBody;
+
+public class MailGunEmailService implements EmailService<EmailPayload, JsonNode> {
+
+    private EmailPayload payload;
+
+    public MailGunEmailService(EmailPayload payload) {
+        this.payload = payload;
+    }
+
+    @Override
+    public JsonNode send() throws UnirestException {
+        System.out.println("Sending...");
+
+        String YOUR_DOMAIN_NAME = "rapidpass.ph";
+
+        /*
+          For testing, attached to Darren's account - for later replacement once provisioned by the DCTx team.
+
+          API restrictions- Free 5000 emails per month for the first 3 months. Be gentle, onegaishimasu.
+         */
+        String API_KEY = "6b796e4df8ff29f68b84f4fb96f151de-ed4dc7c4-42e4bede";
+
+        /*
+          Note: Sandbox domains are restricted to authorized recipients only.
+         */
+        String SANDBOX_URL = "https://api.mailgun.net/v3/sandbox8ebc1f23c6fb46c9ac1e00750239bcb5.mailgun.org/messages";
+        String ACTUAL_URL = "https://api.mailgun.net/v3/" + YOUR_DOMAIN_NAME + "/messages";
+
+        String SANDBOX_SOURCE_EMAIL = "no-reply@sandbox8ebc1f23c6fb46c9ac1e00750239bcb5.mailgun.org";
+
+        /*
+          For actual usage.
+         */
+
+        String SENDER = "RapidPass";
+        String SOURCE_EMAIL = SANDBOX_SOURCE_EMAIL;
+
+        File value = new File("resources/test-pdf.pdf");
+
+        String timestamp = new Date().toString();
+
+        MultipartBody httpRequestWithBody = Unirest.post(SANDBOX_URL)
+                .basicAuth("api", API_KEY)
+                .queryString("from", SENDER + " <" + SOURCE_EMAIL + ">")
+                .queryString("to", "darren.sapalo@gmail.com")
+                .queryString("subject", "RapidPass Registration")
+                .queryString("text", payload.toString() + "\n" + timestamp)
+                .field("attachment", value);
+
+        HttpResponse<JsonNode> request = httpRequestWithBody.asJson();
+
+        return request.getBody();
+    }
+}
diff --git resources/test-pdf.pdf resources/test-pdf.pdf
new file mode 100644
index 0000000000000000000000000000000000000000..dbf091df9a607221e000593a8b5a97b5ea5fb073
GIT binary patch
literal 3028
zc%02v-EP}96uuXrcQ`izVj!g`TB4+)D3D)l-O>b!v0+Ga!B~{dLM9D~ij%(NF7^iP
zi|kN}?bLP)b?b@=L43|3`F-Re&qwZEo}9f1$<X)qK7RW1FW>XM5Ga_t_rCY)mG1?k
z$GL>ySXfb-3Hld}EtQrvFzj}PflDz#Z`gUSU;Ccac{|+q*bb!ScnlnyMq8kpqlP<1
zwIr({46R>OUc(JUju&|Q{}wi(qAx(T)2<{!J<U6~lC^27F|MTTdS<Y#vqH#P^bR|?
ztjzdYT1eLm4$ft+#F2S`8;VgLGD7i#B<qaZcH-J1Uk&lDM8)fQLh!596FY^FCK0%9
zwXLL>xop1iy`z!uIT8xhq?;Y3EP+vhAPE^JG14+dSc?3k-1qk35U$m1UP{27hBJl6
z07gi4I_l6mjF7e%JR>Z|p*&3qr|A-7G*va=pMZKM$`W!pGaBb5tTGzNJTIVd$S-<f
z^N1ugT4KL%Y72#_ps6J&4R$KwH&xk2lyEM`Q=!$k2HRLuDN)u0&P^r3$_Go}Q0Fjn
zZXep1ktAkI+6{m{ZXXhsk~CW7?VI4g<o2NrIY~4A)wLaA{`BMkKDe(Bc^_UHkt|wm
z<-cBP?>xs?T3N>W<+%?Y8Z`ak`xax(hQqJ#+lG63FLmn^aGIiYBXhtaoTIFvCKE!|
zyeKeB@mOmO|Nm)XvP%<_9h%4!{yijdQxMrdkVH)Mc$NR6GP7<6LIQtaCcdktB%JV=
z|8PzDT&6pKi|GMO%>wRPF#-EHZ-3nNP}`;`P-Yqn+E@_vvJ+YhVaHQvf4ff4g~DT(
zSC9X>rtpZ8l&%g*r<VlU`{n?zzEW9>hvgaQ2(KzUu-J%X?LFq!D$DXY-_9aTmxuc%
zaHlXBA>Qrt4%v<>bp?pdb#rH1-$g?VycILo>dYfi%eGE~pJaJ2tr`oAp6ap5UHXIH
zl|Iz9S_U?2E~KB)9^<s}+J*fqaWCQB{?yv}%OF@R7DUVY%4mT#FbgVdeK#0%LXbCO
zi6h>2?QkM%HPQ88iH7fm6JaInpS)z0ayrCaNLb4FU~?`Hl`LFghqx}f`tW$f!x)Nn
zEW}i`EqWcxhFh^PO15H*v8~uJqnoiX-tHIj?S3p`Tf8ia`Bp5(m)$Dnd-#q*6{?<+
seyu*pcG1C=!8!_`#Q0}j7-;wBNhzHQipq9rVo4a`6MpaX;>`E{2H~d*@c;k-

